define(["text!templates/main-tpl.html","text!templates/main-ww-tpl.html","text!templates/main-ww-hot-tpl.html","text!templates/main-messages-tpl.html","text!templates/main-my-ww-tpl.html","text!templates/main-me-tpl.html"],function(i,t,e,n,a,w){var o={ww:{id:"tab-ww",tpl:t},hot:{id:"tab-ww-hot",tpl:e},messages:{id:"tab-ww-messages",tpl:n},myww:{id:"tab-my-ww",tpl:a},me:{id:"tab-me",tpl:w}};var l=function(){this.initialize=function(){this.$el=$("<div/>");this.$el.html($wwCompile(i)(getScope()))};this.render=function(){return this};this.bindEvents=function(){this.$el.find(".tab-item").off("click").on("click",function(){$(this).parent().find("a.tab-item").removeClass("active");$(this).addClass("active")});return this};this.changeView=function(i,t){var e=this;if(!$("body").find(".ww-main").get(0)){t.slidePage(this.$el,function(){e._changeView(i)})}else{e._changeView(i)}};this._changeView=function(i){var t=o[i].tpl;var e=o[i].id;var n=false;this.$el.find(".ww-main > .ww-tab").hide();if(!this.$el.find(".ww-main > #"+e).show().get(0)){this.$el.find(".ww-main").append($(t).wrap('<div id="'+e+'" class="ww-tab"></div>').parent());n=true}if(n&&e==o.ww.id){this.initTabWW(e)}if(n&&e==o.hot.id){this.initTabHot(e)}if(n&&e==o.messages.id){}if(n&&e==o.myww.id){}if(n&&e==o.me.id){$("#pls-login-btn").click(function(){$("#logout_btn").click()});$("#logout_btn").click(function(){window.loginService.logout().done(function(){$("#pls-login-btn").show();require(["ViewController"],function(i){delete window.user;i.switchView("login")})})})}if(e==o.me.id){if(window.user){$("#logout_btn").show();$("#pls-login-btn").hide().parent().find("span").text(window.user.nickName).show()}else{$("#logout_btn").hide();$("#pls-login-btn").show().parent().find("span").hide()}}};this.initTabWW=function(i){var t=$("#"+o.ww.id).find(".ww-container");var e=t.find("#weijian-tab-1");var n=t.find("#weijian-tab-2");this.$el.find(".ww-main").on("click","#"+i+" .ww-nav .control-item",function(i){var a=$(this);require(["WWForumListView"],function(i){t.find(".ww-sub-container").hide();if(a.attr("data-item-name")=="weijian-tab-1"){if(!e._wwForumView){e._wwForumView=new i(e).render().bindEvents()}e.show()}else if(a.attr("data-item-name")=="weijian-tab-2"){if(!n._wwHotTopicView){n._wwHotTopicView=null}n.show()}});a.parent().find(".control-item").removeClass("active");a.addClass("active")});this.$el.find(".ww-main > #"+i+" .ww-nav .control-item").eq(0).click()};this.initTabHot=function(i){var t=$("#"+o.hot.id).find(".ww-container");var e=t.find("#hot-tab-1");var n=t.find("#hot-tab-2");this.$el.find(".ww-main").on("click","#"+i+" .ww-nav .control-item",function(i){var a=$(this);require(["WWReLunListView"],function(i){t.find(".ww-sub-container").hide();if(a.attr("data-item-name")=="hot-tab-1"){if(!e._relunView){e._relunView=new i(e).render().bindEvents()}e.show()}else if(a.attr("data-item-name")=="hot-tab-2"){if(!n._xinluView){n._xinluView=null}n.show()}});a.parent().find(".control-item").removeClass("active");a.addClass("active")});this.$el.find(".ww-main > #"+i+" .ww-nav .control-item").eq(0).click()};this.initialize()};return l});