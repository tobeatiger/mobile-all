define(["text!templates/ww/ww-creation.html"],function(t){var e=function(e){this.initialize=function(){this.$el=$("<div/>");this.$el.html($wwCompile(t)(getScope()));setScope(e,{});setScope(e+"TitleChange",this._titleChange.bind(this))};this._titleChange=function(){var t=this.$el.find("textarea");if(t.prop("scrollHeight")>42){t.css("padding-top","0px")}else{t.css("padding-top","10px")}};this.render=function(){return this};this.bindEvents=function(){var t=this.$el;t.find("a.icon-left-nav").off("click").click(function(){window.backHandler()});t.find("#ww-next-step").off("click").click(function(){var i=t.find(".ql-editor");var n=getScope(e);if(n.title&&n.title.trim().length>4&&(i.text().trim().length>9||i.find("img").length>0)){setScope(e,$.extend(n,{detail:i.html()}));if(e=="newWW"){window.location.href="#ww/create/tags"}else{window.location.href="#ww/edit/tags"}}else{alert("标题至少 5 个字，内容至少 10 个字")}});return this};this.createEditorOnce=function(){var t=this;if(!t.quill){t.quill=new Quill("#ww-create-quill-editor",{modules:{toolbar:[["bold","blockquote","link","image"]]},placeholder:"编辑为谏",theme:"snow"});document.addEventListener("selectionchange",function(){t.quill.getSelection()},false);var e=t.quill.getModule("toolbar");$.addQHandler("image",e);$.addQHandler("link",e)}return t};this.initWWData=function(){var t=getScope("currentWW");setScope(e,t);this.$el.find(".ql-editor").html(t._detail);this._titleChange()};this.initialize()};return e});